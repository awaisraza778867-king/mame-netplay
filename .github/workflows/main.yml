name: Auto Build MAME Netplay
on: [push]

jobs:
  build:
    runs-on: windows-latest
    steps:
      - name: Checkout your files
        uses: actions/checkout@v4

      - name: Download MAME 0.139u1 Source
        run: |
          curl -L -o mame_source.zip https://github.com/mame-dev/mame/archive/refs/tags/mame0139u1.zip
          tar -xf mame_source.zip

      - name: Integrate your Netplay Files
        run: |
          # آپ کی اپ لوڈ کی ہوئی فائلوں کو سورس کوڈ کے صحیح فولڈر میں منتقل کرنا
          cp input_fix.cpp mame-mame0139u1/src/osd/windows/
          cp net_sync.cpp mame-mame0139u1/src/osd/windows/

      - name: Compile MAME (This will take time)
        run: |
          cd mame-mame0139u1
          # یہاں کمپائل کرنے کی کمانڈ چلے گی
          make -j2

      - name: Upload Final EXE
        uses: actions/upload-artifact@v4
        with:
          name: MAME-Netplay-Final-EXE
          path: mame-mame0139u1/*.exe
